{% extends 'base.html' %}
{% block title %}공지사항{% endblock %}
{% block nav_notice %}active{% endblock %}
{% block content %}
<section class="panel">
  <div style="display:flex; align-items:center; justify-content:space-between;">
    <h1>공지사항</h1>
    {% if request.user.is_staff %}
      <a href="{% url 'notices:create_notice' %}" class="btn">공지 작성</a>
    {% endif %}
  </div>

  <ul class="list">
    {% for n in page_obj %}
      <li class="list-item">
        <a href="{% url 'notices:detail_notice' n.id %}">
          [#{{ n.id }}] {{ n.title }}
        </a>
        <div class="muted" style="font-size:12px;">
          {{ n.created_at|date:"Y-m-d H:i" }}
          {% if n.author %} · {{ n.author.username }}{% endif %}
        </div>
      </li>
    {% empty %}
      <li class="list-item">등록된 공지가 없습니다.</li>
    {% endfor %}
  </ul> 

  <div class="pagination" style="margin-top:12px;">
    {% if page_obj.has_previous %}
      <a href="?page={{ page_obj.previous_page_number }}">이전</a>
    {% endif %}
    <span>{{ page_obj.number }} / {{ page_obj.paginator.num_pages }}</span>
    {% if page_obj.has_next %}
      <a href="?page={{ page_obj.next_page_number }}">다음</a>
    {% endif %}
  </div>
</section>
{% endblock %}
